<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Report Action -->

  <record id="paperformat_packing_slip_a4" model="report.paperformat">
    <field name="name">Packing Slip A4</field>
    <field name="default" eval="False" />
    <field name="format">A4</field>
    <field name="page_height">0</field>
    <field name="page_width">0</field>
    <field name="orientation">Portrait</field>
    <field name="margin_top">10</field>
    <field name="margin_bottom">0</field>
    <field name="margin_left">0</field>
    <field name="margin_right">0</field>
    <field name="header_line" eval="False" />
    <field name="header_spacing">0</field>
    <field name="dpi">90</field>
    <field name="disable_shrinking" eval="False" />
  </record>

  <record id="report_lot_barcodes_chalan_action" model="ir.actions.report">
    <field name="name">Packing Slip</field>
    <field name="model">product.template</field>
    <field name="report_type">qweb-pdf</field>
    <field name="report_name">stock_quantity_scan.report_lot_barcodes_chalan_doc</field>
    <field name="report_file">stock_quantity_scan.report_lot_barcodes_chalan_doc</field>
    <field name="binding_model_id" ref="product.model_product_template" />
    <field name="binding_type">report</field>
    <field name="print_report_name">'Packing Slip - %s' % (object.display_name)</field>
    <field name="paperformat_id" ref="stock_quantity_scan.paperformat_packing_slip_a4" />
  </record>

  <!-- QWeb Template -->
  <template id="report_lot_barcodes_chalan_doc">
    <t t-call="web.html_container">
      <t t-call="web.basic_layout">

        <t t-if="slips">
          <style>
            @page {
            size: A4 portrait;
            margin: 0mm;
            }

            body {
            font-family: Arial, sans-serif;
            }
            .slip-page {
            text-align: center;
            font-size: 0; /* remove inline-block spacing */
            }

            .slip-box {
            display: inline-block;
            vertical-align: top;
            width: 49%; /* just under 50% to avoid wrapping */
            height: 400px;
            margin: 0;
            padding: 8px;
            border: 1px solid #000;
            box-sizing: border-box;
            page-break-inside: avoid;
            font-size: 10px; /* restore font size */
            }

            .company-header {
            text-align: center;
            margin-bottom: 4px;
            }
            .company-header div:first-child {
            font-weight: 700;
            font-size: 13px;
            }
            .company-header div:last-child {
            font-size: 10px;
            line-height: 1.2;
            }
            .pack-title {
            border-top: 1px solid #000;
            border-bottom: 1px solid #000;
            text-align: center;
            font-weight: 700;
            padding: 2px 0;
            font-size: 12px;
            margin: 5px 0;
            }
            .info-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 10px;
            }
            .info-table th, .info-table td {
            border: 1px solid #000;
            padding: 2px 4px;
            text-align: left;
            }
            .footer-table {
            width: 100%;
            font-size: 10px;
            border-collapse: collapse;
            margin-top: 5px;
            }
            .footer-table th, .footer-table td {
            border: 1px solid #000;
            height: 20px;
            }
            .barcode-container {
            text-align: center;
            margin-top: 4px;
            }
            .barcode-container img {
            height: 8mm;
            }
            .barcode-text {
            font-size: 10px;
            letter-spacing: 1px;
            }
            html, body {
            margin: 0;
            padding: 0;
            }

            .page {
            padding: 0;
            margin: 0;
            }

            * {
            box-sizing: border-box;
            }

          </style>


          <div class="page slip-page">
            <t t-foreach="slips" t-as="s">
              <div class="slip-box">

                <!-- Header -->
                <div class="company-header">
                  <div>DADRA POLYPLAST INDUSTRIES</div>
                  <div> PLOT NO. 55/2&amp;55/2A RINGANWADA, DAMAN<br /> CUST.CARE.NO. +919328196920
                    â€¢ EMAIL: dadrapolyplast@gmail.com </div>
                </div>

                <!-- Title -->
                <div class="pack-title">PACKING SLIP</div>

                <!-- Info Table -->
                <table class="info-table">
                  <tr>
                    <th>BOX NO.</th>
                    <td>
                      <t t-esc="s['box_no']" />
                    </td>
                  </tr>
                  <tr>
                    <th>DENIER</th>
                    <td>
                      <t t-esc="s['product_name']" />
                    </td>
                  </tr>
                  <tr>
                    <th>GROSS WT.</th>
                    <td><t t-esc="s['gross_weight']" /> kg</td>
                  </tr>
                  <tr>
                    <th>TARE WT.</th>
                    <td><t t-esc="s['tare_weight']" /> kg</td>
                  </tr>
                  <tr>
                    <th>NET WT.</th>
                    <td><t t-esc="s['net_weight']" /> kg</td>
                  </tr>
                  <tr>
                    <th>BOBBIN</th>
                    <td>
                      <t t-esc="s['quantity']" />
                    </td>
                  </tr>
                </table>

                <!-- Footer -->
                <table class="footer-table">
                  <tr>
                    <th>CHECKED BY</th>
                    <th>PACKED BY</th>
                  </tr>
                  <tr>
                    <td></td>
                    <td></td>
                  </tr>
                </table>

                <!-- Barcode -->
                <div class="barcode-container">
                  <t t-set="code_base" t-value="s['code'] or ''" />
                  <t t-set="qty_int" t-value="s['quantity']" />
                  <t t-set="code_full" t-value="code_base and (code_base + '/' + qty_int) or ''" />

                  <t t-if="code_full">
                    <img t-att-src="'/report/barcode/Code128/' + code_full + '/200/50'"
                      alt="barcode" style="height:15mm; display:inline-block; margin-top: 20px;" />
                    <div class="barcode-text">
                      <t t-esc="code_base" />
                    </div>
                  </t>

                </div>

              </div>
            </t>
          </div>

        </t>


        <t t-if="not slips">
          <div class="page" style="padding:24px;">
            <p style="color:#888;">No quants to print.</p>
          </div>
        </t>
      </t>
    </t>
  </template>
</odoo>